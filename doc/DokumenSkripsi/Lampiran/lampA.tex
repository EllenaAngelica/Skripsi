%versi 3 (18-12-2016)
\chapter{Kode Program}
\label{lamp:A}

%terdapat 2 cara untuk memasukkan kode program
% 1. menggunakan perintah \lstinputlisting (kode program ditempatkan di folder yang sama dengan file ini)
% 2. menggunakan environment lstlisting (kode program dituliskan di dalam file ini)
% Perhatikan contoh yang diberikan!!
%
% untuk keduanya, ada parameter yang harus diisi:
% - language: bahasa dari kode program (pilihan: Java, C, C++, PHP, Matlab, C#, HTML, R, Python, SQL, dll)
% - caption: nama file dari kode program yang akan ditampilkan di dokumen akhir
%
% Perhatian: Abaikan warning tentang textasteriskcentered!!
%
\lstinputlisting[language=PHP, caption=auth.php]{./Lampiran/auth.php}

\begin{lstlisting}[caption=autoload.php]
diff --git a/www/application/config/autoload.php b/www/application/config/autoload.php
index 66cb5fa..5d8982b 100644
--- a/www/application/config/autoload.php
+++ b/www/application/config/autoload.php
@@ -58,7 +58,7 @@ $autoload['packages'] = array();
 |
 |	$autoload['libraries'] = array('user_agent' => 'ua');
 */
-$autoload['libraries'] = array('session');
+$autoload['libraries'] = array('database', 'session');
 
 /*
 | -------------------------------------------------------------------
\end{lstlisting}

\begin{lstlisting}[caption=config.php]
diff --git a/www/application/config/config.php b/www/application/config/config.php
index 8679d53..cd6385c 100644
--- a/www/application/config/config.php
+++ b/www/application/config/config.php
@@ -23,7 +23,7 @@ defined('BASEPATH') OR exit('No direct script access allowed');
 | a PHP script and you can easily do that on your own.
 |
 */
-$config['base_url'] = 'https://bluetape.azurewebsites.net';
+$config['base_url'] = getenv('CI_BASE_URL');
 
 /*
 |--------------------------------------------------------------------------
@@ -213,7 +213,7 @@ $config['directory_trigger'] = 'd';
 | your log files will fill up very fast.
 |
 */
-$config['log_threshold'] = 0;
+$config['log_threshold'] = array(1, 3);
 
 /*
 |--------------------------------------------------------------------------
@@ -374,6 +374,7 @@ $config['sess_save_path'] = NULL;
 $config['sess_match_ip'] = FALSE;
 $config['sess_time_to_update'] = 300;
 $config['sess_regenerate_destroy'] = FALSE;
+$config['sess_save_path'] = sys_get_temp_dir();
 
 /*
 |--------------------------------------------------------------------------
@@ -438,7 +439,11 @@ $config['global_xss_filtering'] = FALSE;
 | 'csrf_regenerate' = Regenerate token on every submission
 | 'csrf_exclude_uris' = Array of URIs which ignore CSRF checks
 */
-$config['csrf_protection'] = TRUE;
+if (stripos($_SERVER["REQUEST_URI"],'/PengumumanLine/webhook') === FALSE) {
+    $config['csrf_protection'] = TRUE;
+}else{ 
+    $config['csrf_protection'] 	= FALSE; 
+}
 $config['csrf_token_name'] = 'csrf_token';
 $config['csrf_cookie_name'] = 'csrf_token';
 $config['csrf_expire'] = 7200;
@@ -511,3 +516,5 @@ $config['rewrite_short_tags'] = FALSE;
 | Array:		array('10.0.1.200', '192.168.5.0/24')
 */
 $config['proxy_ips'] = '';
+
+$config['sess_save_path'] = sys_get_temp_dir();
\end{lstlisting}



